<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶å® & å®å® | Secret Space</title>
    <style>
        /* === å…¨å±€é‡ç½® === */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: #0d1117; /* GitHub Dark èƒŒæ™¯è‰² */
            color: #c9d1d9; /* GitHub æ–‡å­—è‰² */
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* === å·¦ä¾§ä¾§è¾¹æ  (Sidebar) === */
        .sidebar {
            width: 280px;
            background-color: #161b22; /* GitHub ä¾§è¾¹æ è‰² */
            border-right: 1px solid #30363d;
            display: flex;
            flex-direction: column;
            padding: 24px;
            flex-shrink: 0;
            transition: width 0.3s;
        }

        /* å¤´åƒåŒºåŸŸ */
        .profile {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #30363d;
        }
        .avatar {
            width: 48px; height: 48px;
            border-radius: 50%;
            background: #ff0066; /* ä½ çš„å¤´åƒèƒŒæ™¯ */
            margin-right: 12px;
            border: 2px solid #30363d;
            background-image: url('chat26.jpg'); /* ä½ çš„å¤´åƒ */
            background-size: cover;
        }
        .profile-info h3 { font-size: 16px; color: #e6edf3; }
        .profile-info p { font-size: 12px; color: #8b949e; }

        /* èœå•åˆ—è¡¨ */
        .nav-menu { list-style: none; flex-grow: 1; }
        .nav-item { margin-bottom: 4px; }
        
        .nav-btn {
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            padding: 10px 16px;
            color: #c9d1d9;
            font-size: 14px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.2s;
        }
        
        /* é€‰ä¸­çŠ¶æ€ & æ‚¬åœçŠ¶æ€ */
        .nav-btn:hover { background-color: #21262d; }
        .nav-btn.active { 
            background-color: #1f6feb; /* GitHub è“è‰²é«˜äº® */
            color: #ffffff;
            font-weight: bold;
        }
        /* ç‰¹æ®Šé«˜äº®ç»™å¿ƒå½¢ç›’å­ */
        .nav-btn.special.active { background-color: #ff0066; border: 1px solid #ff0066; }

        .icon { margin-right: 10px; width: 16px; text-align: center; }

        /* éŸ³ä¹æ’­æ”¾å™¨åŒºåŸŸ (å›ºå®šåœ¨å·¦ä¸‹è§’) */
        .music-player {
            margin-top: auto;
            padding: 15px;
            background: #21262d;
            border-radius: 12px;
            border: 1px solid #30363d;
        }
        .music-info { font-size: 12px; color: #8b949e; margin-bottom: 8px; }
        .music-controls { display: flex; gap: 10px; }
        .control-btn {
            background: #30363d; border: none; color: #c9d1d9;
            padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;
            flex: 1;
        }
        .control-btn:hover { background: #8b949e; color: white; }
        .playing-indicator { color: #ff0066; font-weight: bold; font-size: 12px; display: none; }

        /* === å³ä¾§å†…å®¹åŒº (Main Content) === */
        .main-content {
            flex-grow: 1;
            background-color: #0d1117;
            position: relative;
        }

        /* iframe å®¹å™¨ */
        #app-frame {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; padding: 10px; flex-direction: row; align-items: center; justify-content: space-between; border-right: none; border-bottom: 1px solid #30363d; }
            .profile { margin-bottom: 0; padding-bottom: 0; border: none; margin-right: 10px; }
            .profile-info { display: none; }
            .nav-menu { display: flex; gap: 5px; overflow-x: auto; }
            .music-player { display: none; /* ç§»åŠ¨ç«¯æš‚æ—¶éšè—éŸ³ä¹æ¡ï¼Œçœç©ºé—´ */ }
            .nav-btn { padding: 8px 12px; white-space: nowrap; }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="profile">
            <div class="avatar"></div>
            <div class="profile-info">
                <h3>å®¶å® â¤ï¸ å®å®</h3>
                <p>Secret Space v1.0</p>
            </div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <button class="nav-btn" onclick="switchTab(this, 'welcome.html')">
                    <span class="icon">ğŸ </span> æ¦‚è§ˆ Dashboard
                </button>
            </li>
            
            <li class="nav-item">
                <button class="nav-btn special active" onclick="switchTab(this, 'love.html')">
                    <span class="icon">ğŸ</span> ç™¾æ—¥å¿ƒç›’ HeartBox
                </button>
            </li>

            <li class="nav-item">
                <button class="nav-btn" onclick="switchTab(this, 'tree.html')">
                    <span class="icon">ğŸ„</span> é­”æ³•åœ£è¯ MagicTree
                </button>
            </li>

            <li class="nav-item">
                <button class="nav-btn" style="opacity: 0.5; cursor: not-allowed;">
                    <span class="icon">ğŸ”’</span> çºªå¿µæ—¥æ—¥å† (Dev)
                </button>
            </li>
        </ul>

        <div class="music-player">
            <div class="music-info">
                ğŸµ BGM: äº¤æ¢ä½™ç”Ÿ <span class="playing-indicator" id="play-status">â–¶ing</span>
            </div>
            <div class="music-controls">
                <button class="control-btn" id="play-btn">æ’­æ”¾</button>
                <button class="control-btn" id="pause-btn">æš‚åœ</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <iframe id="app-frame" src="love.html" title="App Window"></iframe>
    </main>

    <script>
        // === é¡µé¢åˆ‡æ¢é€»è¾‘ ===
        function switchTab(btn, url) {
            // 1. ç§»é™¤æ‰€æœ‰ active æ ·å¼
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            // 2. ç»™å½“å‰æŒ‰é’®æ·»åŠ  active
            btn.classList.add('active');
            // 3. åˆ‡æ¢ iframe åœ°å€
            const frame = document.getElementById('app-frame');
            
            // æ·»åŠ æ·¡å…¥æ·¡å‡ºæ•ˆæœ
            frame.style.opacity = 0;
            setTimeout(() => {
                frame.src = url;
                frame.onload = () => {
                    frame.style.opacity = 1;
                };
            }, 200);
        }

        // === å…¨å±€éŸ³ä¹æ§åˆ¶ ===
        // æ³¨æ„ï¼šæŠŠ exchange.mp3 æ”¾åœ¨æ ¹ç›®å½•ï¼Œå’Œ index.html åœ¨ä¸€èµ·
        const audio = new Audio('love_story.mp3'); 
        audio.loop = true;
        audio.volume = 0.5;

        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const statusText = document.getElementById('play-status');

        playBtn.addEventListener('click', () => {
            audio.play().then(() => {
                statusText.style.display = 'inline';
                playBtn.style.background = '#1f6feb';
                playBtn.style.color = 'white';
            }).catch(e => console.log("äº¤äº’é™åˆ¶"));
        });

        pauseBtn.addEventListener('click', () => {
            audio.pause();
            statusText.style.display = 'none';
            playBtn.style.background = '#30363d';
        });

        // å°è¯•è‡ªåŠ¨æ’­æ”¾ (éƒ¨åˆ†æµè§ˆå™¨å…è®¸)
        document.body.addEventListener('click', () => {
            if(audio.paused) {
                audio.play();
                statusText.style.display = 'inline';
            }
        }, { once: true });

    </script>
</body>
</html>
